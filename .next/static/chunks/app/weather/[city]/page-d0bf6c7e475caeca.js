(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[827],{2181:function(e,t,a){Promise.resolve().then(a.bind(a,5597))},5597:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var l=a(7437),s=a(2265),i=a(7551);function r(e){let{coords:t}=e,a=s.useRef(null);return s.useEffect(()=>{a.current&&(async()=>{let e=new i.aN({apiKey:"AIzaSyBpm6hmKjwljVWUUGDsWMqi206yYQ3DLVw",version:"weekly"}),{Map:l}=await e.importLibrary("maps"),s={lat:t.lat,lng:t.lng},{AdvancedMarkerElement:r}=await e.importLibrary("marker"),n=new l(a.current,{center:s,zoom:12,mapTypeId:"terrain",mapId:"weather-map"});new r({position:s,map:n})})()},[t]),(0,l.jsx)("div",{ref:a,className:"w-full h-[350px] rounded-lg"})}var n=a(6017),d=a(4970),o=a(4058),c=a(1630),m=a(8637),p=a(9499),u=a(4859),h=a(3622),x=a(3937),f=a(5066),g=a(3946),w=a(3724),v=a(2891),j=a(2503),b=a(6648),y=a(6463);let N=["Hour","weather","tempreature","Real Feel","pressure","sea level","ground level","humidity","wind speed","wind degree","visibility"];var C=e=>{var t,a,i,C,S,D,W;let{params:T}=e,_=(0,y.useSearchParams)();(0,y.useRouter)();let E=(0,s.useMemo)(()=>({lat:Number(_.get("lat")),lng:Number(_.get("lng"))}),[_]),[I,Z]=(0,s.useState)([]),[k,P]=(0,s.useState)({date:"".concat(new Date().getFullYear(),"-").concat((new Date().getMonth()+1).toString().padStart(2,"0"),"-").concat(new Date().getDate().toString().padStart(2,"0")),index:0}),F=()=>{let e=[];for(let t=0;t<5;t++){let a=new Date;a.setDate(a.getDate()+t),e.push(a)}return Z(e),e},L=(0,n.TL)(),{theme:M}=(0,n.CG)(e=>e.cities),{loading:z,currentWeather:G,error:R,foreCastWeather:U,foreCastError:V}=(0,n.CG)(e=>e.weather);(0,s.useEffect)(()=>{let e={...E};L((0,d.c)(e)),L((0,d.v)(e)),F()},[E,L]),(0,s.useEffect)(()=>{if(console.log(G),console.log(U),G){L((0,c.p)({max:G.main.temp_max,min:G.main.temp_min}));let e={city:T.city,maxTemp:G.main.temp_max,minTemp:G.main.temp_min},t=JSON.parse(localStorage.getItem("history"));t&&t.length>0?t.find(e=>e.city===T.city)||t.push(e):t=[e],localStorage.setItem("history",JSON.stringify(t))}},[G,L,U]);let O=e=>new Date(1e3*e).toLocaleTimeString();function Y(e){return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(e/22.5)%16]}return((0,s.useEffect)(()=>{let e=localStorage.getItem("theme"),t=JSON.parse(localStorage.getItem("favCity")||"[]");e&&L((0,o.Dc)(e)),(null==t?void 0:t.length)>0&&L((0,o.j$)(t))},[]),z||!U)?(0,l.jsx)("div",{className:"w-full h-screen flex items-center justify-center text-blue-500 bg-slate-300",children:"Loading..."}):(0,l.jsx)(s.Suspense,{fallback:(0,l.jsx)("div",{className:"w-full h-screen flex items-center justify-center text-blue-500 bg-slate-300",children:"Loading..."}),children:(0,l.jsxs)("div",{className:"w-full px-4 md:px-12 md:py-8 lg:px-16 lg:py-12 xl:px-24 xl:py-16 ".concat("light"===M?"bg-slate-100":"bg-slate-900"),children:[(0,l.jsxs)("div",{className:"w-full flex flex-col-reverse lg:flex-row gap-6",children:[(0,l.jsxs)("div",{className:"w-full ".concat("light"===M?"bg-white":"bg-slate-800"," p-3 rounded-xl"),children:[(0,l.jsxs)("div",{className:"w-full flex flex-col lg:flex-row gap-4",children:[(0,l.jsxs)("div",{className:"flex-1 flex bg-blue-500 rounded-lg p-3 text-white ",children:[(0,l.jsxs)("div",{className:"w-full flex flex-col justify-center items-center",children:[(0,l.jsx)(b.default,{src:"https://openweathermap.org/img/wn/".concat(null==G?void 0:G.weather[0].icon,"@2x.png"),alt:"Weather Icon",width:40,height:40}),(0,l.jsxs)("h1",{className:"text-2xl font-medium whitespace-nowrap",children:[((null==G?void 0:G.main.temp)-273.15).toFixed(2)||0,"\xb0C"]}),(0,l.jsx)("p",{className:"text-xs",children:(null==G?void 0:G.weather[0].main)||""})]}),(0,l.jsxs)("div",{className:"w-full flex flex-col justify-center",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold whitespace-nowrap",children:decodeURIComponent(T.city)||""}),(0,l.jsx)("p",{className:"text-xs capitalize",children:null==G?void 0:G.weather[0].description}),(0,l.jsx)("p",{className:"text-xs",children:new Date(1e3*(null==G?void 0:G.dt)).toDateString()||""})]})]}),(0,l.jsxs)("div",{className:"flex-1 flex bg-blue-500 rounded-lg p-3 text-white gap-2 ",children:[(0,l.jsxs)("div",{className:"flex-1 flex items-center border rounded-md gap-2 p-3 backdrop-blur justify-center",children:[(0,l.jsx)("div",{className:"p-3 rounded-full bg-gradient-to-t from-orange-200 to-yellow-400",children:(0,l.jsx)(m.Z,{className:"w-6 h-6"})}),(0,l.jsxs)("div",{className:"text-sm uppercase whitespace-nowrap",children:[(0,l.jsx)("strong",{className:"text-sm font-bold",children:"Sunrise"}),(0,l.jsx)("br",{}),O(null==G?void 0:G.sys.sunrise)]})]}),(0,l.jsxs)("div",{className:"flex-1 flex items-center border rounded-md gap-2 p-3 backdrop-blur justify-center",children:[(0,l.jsx)("div",{className:"p-3 rounded-full bg-gradient-to-b from-yellow-200 to-orange-400",children:(0,l.jsx)(p.Z,{className:"w-6 h-6"})}),(0,l.jsxs)("div",{className:"text-sm uppercase whitespace-nowrap",children:[(0,l.jsx)("strong",{className:"text-sm font-bold",children:"Sunset"}),(0,l.jsx)("br",{}),O(null==G?void 0:G.sys.sunset)]})]})]})]}),(0,l.jsxs)("div",{className:"w-full mt-6 flex items-center justify-between flex-wrap gap-4 text-slate-600",children:[(0,l.jsxs)("div",{className:"w-fit flex-1 basis-[120px] border rounded-md overflow-hidden",children:[(0,l.jsxs)("h1",{className:"flex items-center gap-2 mb-2 bg-blue-500 text-white p-3 whitespace-nowrap",children:[(0,l.jsx)(u.Z,{}),"Real feel"]}),(0,l.jsxs)("p",{className:"text-xl font-medium px-3 py-2",children:[((null==G?void 0:G.main.feels_like)-273.15).toFixed(2),"\xb0C"]})]}),(0,l.jsxs)("div",{className:"w-fit flex-1 basis-[120px] border rounded-md overflow-hidden",children:[(0,l.jsxs)("h1",{className:"flex items-center gap-2 mb-2 bg-blue-500 text-white p-3 whitespace-nowrap",children:[(0,l.jsx)(h.Z,{}),"Humidity"]}),(0,l.jsxs)("p",{className:"text-xl font-medium px-3 py-2",children:[(null==G?void 0:null===(t=G.main)||void 0===t?void 0:t.humidity)||0,"%"]})]}),(0,l.jsxs)("div",{className:"w-fit flex-1 basis-[120px] border rounded-md overflow-hidden",children:[(0,l.jsxs)("h1",{className:"flex items-center gap-2 mb-2 bg-blue-500 text-white p-3 whitespace-nowrap",children:[(0,l.jsx)(x.Z,{}),"Pressure"]}),(0,l.jsxs)("p",{className:"text-xl font-medium px-3 py-2",children:[(null==G?void 0:null===(a=G.main)||void 0===a?void 0:a.pressure)||0," hPa"]})]}),(0,l.jsxs)("div",{className:"w-fit flex-1 basis-[120px] border rounded-md overflow-hidden",children:[(0,l.jsxs)("h1",{className:"flex items-center gap-2 mb-2 bg-blue-500 text-white p-3 whitespace-nowrap",children:[(0,l.jsx)(f.Z,{}),"Sea level"]}),(0,l.jsxs)("p",{className:"text-xl font-medium px-3 py-2",children:[(null==G?void 0:null===(i=G.main)||void 0===i?void 0:i.sea_level)||0," hPa"]})]}),(0,l.jsxs)("div",{className:"w-fit flex-1 basis-[120px] border rounded-md overflow-hidden",children:[(0,l.jsxs)("h1",{className:"flex items-center gap-2 mb-2 bg-blue-500 text-white p-3 whitespace-nowrap",children:[(0,l.jsx)(g.Z,{}),"Ground level"]}),(0,l.jsxs)("p",{className:"text-xl font-medium px-3 py-2",children:[(null==G?void 0:null===(C=G.main)||void 0===C?void 0:C.grnd_level)||0," hPa"]})]}),(0,l.jsxs)("div",{className:"w-fit flex-1 basis-[120px] border rounded-md overflow-hidden",children:[(0,l.jsxs)("h1",{className:"flex items-center gap-2 mb-2 bg-blue-500 text-white p-3 whitespace-nowrap",children:[(0,l.jsx)(w.Z,{}),"Wind Speed"]}),(0,l.jsxs)("p",{className:"text-xl font-medium px-3 py-2",children:[(null==G?void 0:G.wind.speed)||0," m/sec"]})]}),(0,l.jsxs)("div",{className:"w-fit flex-1 basis-[120px] border rounded-md overflow-hidden",children:[(0,l.jsxs)("h1",{className:"flex items-center gap-2 mb-2 bg-blue-500 text-white p-3 whitespace-nowrap",children:[(0,l.jsx)(v.Z,{}),"Wind Degree"]}),(0,l.jsxs)("p",{className:"text-xl font-medium px-3 py-2",children:[(null==G?void 0:null===(S=G.wind)||void 0===S?void 0:S.deg)||0," ",Y(null==G?void 0:null===(D=G.wind)||void 0===D?void 0:D.deg)]})]}),(0,l.jsxs)("div",{className:"w-fit flex-1 basis-[120px] border rounded-md overflow-hidden",children:[(0,l.jsxs)("h1",{className:"flex items-center gap-2 mb-2 bg-blue-500 text-white p-3 whitespace-nowrap",children:[(0,l.jsx)(j.Z,{}),"Wind Gust"]}),(0,l.jsx)("p",{className:"text-xl font-medium px-3 py-2",children:(null==G?void 0:null===(W=G.main)||void 0===W?void 0:W.gust)||0})]})]})]}),(0,l.jsx)("div",{className:"w-full ".concat("light"===M?"bg-white":"bg-slate-800"," p-3 rounded-xl"),children:(0,l.jsx)(r,{coords:E})})]}),(0,l.jsxs)("div",{className:"w-full my-6",children:[(0,l.jsx)("div",{className:"w-full p-3 rounded-xl",children:(0,l.jsxs)("h1",{className:"text-2xl font-bold mb-4 ".concat("light"===M?"text-black":"text-white"),children:["5 Days Weather Forecast for ",decodeURIComponent(T.city)]})}),(0,l.jsx)("div",{className:"w-full flex items-center gap-4 overflow-auto",children:I.map((e,t)=>(0,l.jsx)("button",{className:"".concat(k.index===t?"bg-blue-500":"bg-blue-300"," p-2 px-3 rounded-md text-white whitespace-nowrap"),onClick:()=>P({index:t,date:"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0"))}),children:e.toDateString()},t))}),k.date&&(0,l.jsx)("div",{className:"w-full rounded-xl border ".concat("light"===M?"bg-white text-black":"bg-slate-800 text-white"," mt-4 overflow-auto"),children:(0,l.jsxs)("table",{className:"w-full border-transparent",children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{className:"w-full border bg-slate-800 text-white",children:N.map((e,t)=>(0,l.jsx)("th",{className:"border p-3 whitespace-nowrap capitalize text-sm",children:e},t))})}),(0,l.jsx)("tbody",{children:null==U?void 0:U.filter(e=>e.dt_txt.split(" ")[0]===k.date).map((e,t)=>{var a;return(0,l.jsxs)("tr",{className:"w-full text-sm border text-center",children:[(0,l.jsx)("td",{className:"p-3",children:e.dt_txt.split(" ")[1]}),(0,l.jsxs)("td",{className:"p-3 flex items-center",children:[(0,l.jsx)(b.default,{src:"https://openweathermap.org/img/wn/".concat(null==G?void 0:G.weather[0].icon,"@2x.png"),alt:"Weather Icon",width:40,height:40}),(0,l.jsxs)("div",{className:"flex flex-col items-start",children:[(0,l.jsx)("p",{children:e.weather[0].main}),(0,l.jsx)("p",{className:"text-xs ".concat("light"===M?"text-gray-700":"text-gray-300"),children:e.weather[0].description})]})]}),(0,l.jsxs)("td",{className:"p-3",children:[(e.main.temp-273.15).toFixed(2),"\xb0C"]}),(0,l.jsxs)("td",{className:"p-3",children:[(e.main.feels_like-273.15).toFixed(2),"\xb0C"]}),(0,l.jsxs)("td",{className:"p-3",children:[e.main.pressure," hPa"]}),(0,l.jsxs)("td",{className:"p-3",children:[e.main.sea_level," hPa"]}),(0,l.jsxs)("td",{className:"p-3",children:[e.main.grnd_level," hPa"]}),(0,l.jsxs)("td",{className:"p-3",children:[e.main.humidity," %"]}),(0,l.jsxs)("td",{className:"p-3",children:[e.wind.speed," m/sec"]}),(0,l.jsxs)("td",{className:"p-3",children:[e.wind.deg," ",Y(null==G?void 0:null===(a=G.wind)||void 0===a?void 0:a.deg)]}),(0,l.jsxs)("td",{className:"p-3",children:[e.visibility," m"]})]},t)})})]})})]})]})})}},6017:function(e,t,a){"use strict";a.d(t,{CG:function(){return i},TL:function(){return s}});var l=a(1444);let s=l.I0.withTypes(),i=l.v9.withTypes();l.oR.withTypes()},7017:function(e,t,a){"use strict";a.d(t,{j:function(){return l}});let l=(0,a(9753).hg)("fetchGeonameData",async e=>{console.log(e);{let t;t=e.searchTerm&&e.searchTerm.length>0?"".concat("https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/geonames-all-cities-with-a-population-1000/records","?where=ascii_name%20like%20%22").concat(e.searchTerm,"%22"):"".concat("https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/geonames-all-cities-with-a-population-1000/records","?limit=").concat(e.limit,"&offset=").concat(e.page,"&refine=timezone:").concat(e.timezone),e.order&&(console.log(e.order),t=t.replace("?","?&order_by=".concat(e.order,"&"))),console.log(t);let a=await fetch(t),l=await a.json();return{data:l.results,totalItems:l.total_count,timezone:e.timezone,pageLimit:e.limit,currentPage:e.page,searchTerm:e.searchTerm,order:e.order,orderField:e.order?"ascii_name"===e.order.split("%20")[0]?"City Name":"Population":""}}})},4970:function(e,t,a){"use strict";a.d(t,{c:function(){return s},v:function(){return i}});var l=a(9753);let s=(0,l.hg)("weather/fetchCurrentWeatherData",async e=>{console.log("AIzaSyBpm6hmKjwljVWUUGDsWMqi206yYQ3DLVw");let t=await fetch("".concat("https://api.openweathermap.org/data/2.5","/weather?appid=").concat("67dd25425fe33e3cf5e281b7a7e051c4","&lat=").concat(e.lat,"&lon=").concat(e.lng));return await t.json()}),i=(0,l.hg)("weather/fetchForecastWeatherData",async e=>{console.log("AIzaSyBpm6hmKjwljVWUUGDsWMqi206yYQ3DLVw");let t=await fetch("".concat("https://api.openweathermap.org/data/2.5","/forecast?appid=").concat("67dd25425fe33e3cf5e281b7a7e051c4","&lat=").concat(e.lat,"&lon=").concat(e.lng));return(await t.json()).list})},4058:function(e,t,a){"use strict";a.d(t,{Dc:function(){return d},It:function(){return c},M$:function(){return n},j$:function(){return o}});var l=a(9753),s=a(7017);let i=e=>{console.log(e);let t=new Set,a=[];for(let l=0;l<e.length;l++)t.has(e[l].geoname_id)||(t.add(e[l].geoname_id),a.push(e[l]));return console.log(a),a},r=(0,l.oM)({name:"cities",initialState:{loading:!1,citiesData:[],totalMergeCount:0,mergeCitiesData:[],error:null,currentPage:1,totalItems:0,timeZone:"",pageLimit:20,searchTerm:"",order:"ascii_name%20ASC",orderField:"City Name",theme:"light",favCityData:[]},reducers:{setCitiesData:(e,t)=>({...e,totalMergeCount:t.payload.length,mergeCitiesData:t.payload}),setTheme:(e,t)=>(localStorage.setItem("theme",t.payload),{...e,theme:t.payload}),setFavCityData:(e,t)=>({...e,favCityData:t.payload}),setTimeZone:(e,t)=>({...e,timeZone:t.payload})},extraReducers:e=>{e.addCase(s.j.pending,e=>{e.loading=!0}),e.addCase(s.j.fulfilled.type,(e,t)=>{var a,l,s,r,n,d,o,c,m,p;e.loading=!1,e.citiesData=null===(a=t.payload)||void 0===a?void 0:a.data,e.totalMergeCount=e.mergeCitiesData.length,e.mergeCitiesData=e.searchTerm?i(null===(l=t.payload)||void 0===l?void 0:l.data):i([...e.mergeCitiesData,...null===(s=t.payload)||void 0===s?void 0:s.data]),e.totalItems=null===(r=t.payload)||void 0===r?void 0:r.totalItems,e.timeZone=null===(n=t.payload)||void 0===n?void 0:n.timezone,e.pageLimit=null===(d=t.payload)||void 0===d?void 0:d.pageLimit,e.currentPage=null===(o=t.payload)||void 0===o?void 0:o.currentPage,e.searchTerm=null===(c=t.payload)||void 0===c?void 0:c.searchTerm,e.order=null===(m=t.payload)||void 0===m?void 0:m.order,e.orderField=null===(p=t.payload)||void 0===p?void 0:p.orderField,e.error=null}),e.addCase(s.j.rejected,e=>{e.loading=!1,e.citiesData=[],e.error="Something went wrong"})}}),{setCitiesData:n,setTheme:d,setFavCityData:o,setTimeZone:c}=r.actions;t.ZP=r.reducer},1630:function(e,t,a){"use strict";a.d(t,{p:function(){return r}});var l=a(9753),s=a(4970);let i=(0,l.oM)({name:"weather",initialState:{loading:!1,currentWeather:null,foreCastWeather:[],maxTempCity:null,minTempCity:null,foreCastError:null,error:null},reducers:{setTempCity:(e,t)=>({...e,maxTempCity:t.payload.max,minTempCity:t.payload.min})},extraReducers(e){e.addCase(s.c.pending,e=>{e.loading=!0,e.error=null}),e.addCase(s.c.fulfilled.type,(e,t)=>{e.loading=!1,e.currentWeather=t.payload,e.error=null}),e.addCase(s.c.rejected,(e,t)=>{e.loading=!1,e.currentWeather=null,e.error=t.payload}),e.addCase(s.v.pending,e=>{e.loading=!0,e.foreCastError=null}),e.addCase(s.v.fulfilled.type,(e,t)=>{e.loading=!1,e.foreCastWeather=t.payload,e.foreCastError=null}),e.addCase(s.v.rejected,(e,t)=>{e.loading=!1,e.foreCastWeather=[],e.foreCastError=t.payload})}}),{setTempCity:r}=i.actions;t.Z=i.reducer}},function(e){e.O(0,[417,648,46,971,23,744],function(){return e(e.s=2181)}),_N_E=e.O()}]);